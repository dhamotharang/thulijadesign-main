<ion-toolbar color="primary">
	<ion-buttons slot="start">
		<ion-menu-button></ion-menu-button>
	</ion-buttons>
	<ion-title>{{ 'SCHOLARBATCHREGISTRATION' | translate }}</ion-title>
</ion-toolbar>
<div class="container mat-elevation-z2" *ngIf="scholarBatchRegistrationFormGroup && scholarBatchRegistrationFormArray">
	<form [formGroup]="scholarBatchRegistrationFormGroup">
		<table formArrayName="scholarBatchRegistrationForm">
			<ng-container matColumnDef="batchPrerequisite">
				<th mat-header-cell *matHeaderCellDef>{{ 'SCHOLAR-BATCH-REGISTRATION-BATCHPREREQUISITE' | translate }}</th>
				<td mat-cell *matCellDef="let element; let index = index" [formGroupName]="index">
					<span class="mat-subheading-1">{{ element.get("batchPrerequisite").value.description }}</span>
				</td>
				<td mat-footer-cell *matFooterCellDef>
					<button mat-raised-button color="primary" (click)="save()">Save</button></td>
			</ng-container>
			<ng-container matColumnDef="response">
				<th mat-header-cell *matHeaderCellDef>{{ 'SCHOLAR-BATCH-REGISTRATION-RESPONSE' | translate }}</th>
				<td mat-cell *matCellDef="let element; let index = index" [formGroupName]="index">
					<ion-checkbox formControlName="response"></ion-checkbox>
				</td>
				<td mat-footer-cell *matFooterCellDef>&nbsp;</td>
			</ng-container>
			<ng-container matColumnDef="attachment">
				<th mat-header-cell *matHeaderCellDef>{{ 'SCHOLAR-BATCH-REGISTRATION-ATTACHMENT' | translate }}</th>
				<td mat-cell *matCellDef="let element; let index = index" [formGroupName]="index">
					<ion-item>
						<input matInput type="text" formControlName="attachment" #attachment readonly/>
						<button mat-icon-button matSuffix style="padding-left: 15px; padding-right: 15px;"
								(click)="open(element.value)">
							<ion-icon style="font-size: 20px;">file_present</ion-icon>
						</button>
						<button mat-icon-button matSuffix style="padding-left: 15px; padding-right: 15px;"
								(click)="attachment_fileinput.click()">
							<ion-icon style="font-size: 20px;">cloud_upload</ion-icon>
						</button>
						<input type="file" class="input_fileupload" #attachment_fileinput
							(change)="uploadAttachment($event, attachment, index)" accept=".png, .pdf, .jpg, .jpeg" />
					</ion-item>
				</td>
				<td mat-footer-cell *matFooterCellDef>&nbsp;</td>
			</ng-container>
			<ng-container matColumnDef="remarks">
				<th mat-header-cell *matHeaderCellDef>{{ 'SCHOLAR-BATCH-REGISTRATION-REMARKS' | translate }}</th>
				<td mat-cell *matCellDef="let element; let index = index" [formGroupName]="index">
					<ion-item>
						<textarea matInput type="textarea" formControlName="remarks" id="remarks" 
							name="remarks" placeholder="{{ 'SCHOLAR-BATCH-REGISTRATION-REMARKS' | translate }}" min="invalid" max="invalid"></textarea>
					</ion-item>
					<div>
						<div *ngIf="hasError(index, 'remarks', 'minlength')">
							{{ 'SCHOLAR-BATCH-REGISTRATION-REMARKS' | translate }}: {{ 'FIELD-MUSTBE-MINIMUM-LENGTH' | translate }} 1</div>
						<div *ngIf="hasError(index, 'remarks', 'maxlength')">
							{{ 'SCHOLAR-BATCH-REGISTRATION-REMARKS' | translate }}: {{ 'FIELD-MUSTBE-MAXIMUM-LENGTH' | translate }} 500</div>
					</div>
				</td>
				<td mat-footer-cell *matFooterCellDef>&nbsp;</td>
			</ng-container>
		</table>
	</form>
</div>